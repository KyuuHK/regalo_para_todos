<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Una Carta Especial</title>
    <style>
        /* --- RESET Y BASE --- */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html {
            height: 100dvh; width: 100%;
            font-family: 'Georgia', serif; /* Fuente m√°s elegante */
            overflow: hidden;
            /* Fondo de la escena (tu imagen anterior) */
            background: url('fondo_navidad.png') no-repeat center center/cover;
            display: flex; justify-content: center; align-items: center;
            perspective: 1000px; /* Fact: Crucial para el efecto 3D */
        }
        /* Capa oscura para mejorar contraste */
        body::after {
            content: ''; position: absolute; top:0; left:0; width:100%; height:100%;
            background: rgba(0,0,0,0.4); z-index: -1;
        }

        /* --- EL CONTENEDOR DEL SOBRE --- */
        .envelope-wrapper {
            position: relative;
            width: 300px;
            height: 200px;
            cursor: pointer;
            transform-style: preserve-3d; /* Permite que los hijos vivan en 3D */
            transition: transform 0.6s ease;
        }
        
        /* Animaci√≥n de entrada flotante */
        .envelope-wrapper { animation: floatUp 1s ease-out; }
        @keyframes floatUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* --- PARTES DEL SOBRE (Puro CSS) --- */
        .envelope-body {
            position: absolute; bottom: 0; width: 100%; height: 100%;
            background: #d4af37; /* Color dorado/papel */
            background: linear-gradient(to bottom right, #fceabb, #f8b500);
            border-radius: 5px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            z-index: 2;
            overflow: hidden;
        }
        /* Los tri√°ngulos que forman el frente del sobre */
        .envelope-body::after {
            content: ''; position: absolute; width: 0; height: 0; z-index: 3;
            border-top: 100px solid transparent;
            border-right: 150px solid #e6c975; /* Color ligeramente diferente para dar volumen */
            border-bottom: 100px solid #e6c975;
            border-left: 150px solid #e6c975;
            bottom: 0;
        }

        /* La solapa superior que se abre */
        .flap {
            position: absolute; top: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom right, #fceabb, #f8b500);
            border-radius: 5px;
            clip-path: polygon(0 0, 50% 50%, 100% 0); /* Recorta en forma de tri√°ngulo */
            transform-origin: top; /* Fact: Gira desde el borde superior */
            transition: transform 0.6s ease 0s, z-index 0s linear 0.3s; /* Delay en z-index para que no atraviese la carta */
            z-index: 5;
        }

        /* El sello de cera rojo */
        .seal {
            position: absolute; top: 45%; left: 50%;
            width: 50px; height: 50px;
            background: #b71c1c;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: inset 0 0 10px rgba(0,0,0,0.3), 0 2px 5px rgba(0,0,0,0.2);
            z-index: 6;
            display: flex; justify-content: center; align-items: center;
            color: #900; font-weight: bold; font-size: 1.5rem;
            transition: opacity 0.4s ease;
        }

        /* --- LA CARTA INTERIOR --- */
        .letter {
            position: absolute;
            top: 10px; left: 5%;
            width: 90%; height: 90%;
            background: #fffaf0; /* Blanco crema */
            padding: 20px;
            text-align: center;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.4s; /* Efecto rebote al salir */
            z-index: 1; /* Empieza detr√°s del sobre */
            display: flex; flex-direction: column; justify-content: center;
        }
        
        .letter h2 { color: #b71c1c; font-size: 1.4rem; margin-bottom: 10px; }
        .letter p { color: #555; font-size: 0.95rem; line-height: 1.4; }
        .signature { margin-top: 15px; font-style: italic; color: #b71c1c; font-weight: bold; }

        /* --- ESTADOS DE APERTURA (Activados por JS) --- */
        .envelope-wrapper.open .flap {
            transform: rotateX(180deg); /* Abre la tapa 180 grados */
            z-index: 0; /* Se va al fondo */
        }
        .envelope-wrapper.open .seal { opacity: 0; /* El sello desaparece */ }
        
        .envelope-wrapper.open .letter {
            transform: translateY(-150px) scale(1.1); /* La carta sube y crece */
            z-index: 10; /* Se pone al frente de todo */
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        }
        
        /* Texto de instrucci√≥n peque√±o */
        .hint { position: absolute; bottom: 15%; color: white; opacity: 0.8; font-family: sans-serif; font-size: 0.9rem; animation: pulse 2s infinite; }
        @keyframes pulse { 50% { opacity: 0.4; } }
    </style>
</head>
<body>

    <div class="envelope-wrapper" id="envelope">
        <div class="flap"></div>
        <div class="seal">üéÑ</div>
        <div class="envelope-body"></div>
        
        <div class="letter">
            <h2>¬°Felices Fiestas!</h2>
           <p>Quisiera desearles a todos unas felices fiestas llenas de alegr√≠a, paz y momentos inolvidables con sus seres queridos.</p>
            <p>¬°Que el pr√≥ximo a√±o venga cargado de √©xitos y mucha felicidad!</p>
        </div>
    </div>
    <p class="hint" id="hint-text">Toca el sobre para abrir</p>

    <script>
        const envelope = document.getElementById('envelope');
        const hint = document.getElementById('hint-text');
        let isOpen = false;

        // Usamos pointerdown para respuesta instant√°nea en m√≥vil
        envelope.addEventListener('pointerdown', () => {
            if (!isOpen) {
                envelope.classList.add('open');
                hint.style.opacity = '0'; // Ocultar la instrucci√≥n
                isOpen = true;
            } else {
                // Opcional: Si tocan de nuevo, se cierra (puedes quitar esto si no lo quieres)
                envelope.classList.remove('open');
                isOpen = false;
            }
        });
    </script>
</body>
</html>
